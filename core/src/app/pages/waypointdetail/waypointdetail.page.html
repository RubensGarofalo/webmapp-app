<ng-container *ngIf="waypoint$|async as waypoint">
  <ion-menu side="end" menuId="optionMenu" contentId="main">
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-icon
            name="close-outline"
            class="wm-waypointdetail-menuclose"
            (click)="closeMenu()"
          ></ion-icon>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <ion-list>
        <ion-item>
          <i class="webmapp-icon-edit-outline " start></i>
          <div class="wm-waypointdetail-menuitem">{{'pages.waypointdetail.edit'|wmtrans}}</div>
        </ion-item>
        <ion-item>
          <ion-icon name="trash-outline" start></ion-icon>
          <div class="wm-waypointdetail-menuitem">{{'pages.waypointdetail.delete'|wmtrans}}</div>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button
          mode="ios"
          defaultHref="map"
          text=""
          class="webmapp-backbutton webmapp-backbutton-dark"
        ></ion-back-button>
      </ion-buttons>
      <ion-title>{{'pages.waypointdetail.title'|wmtrans}}</ion-title>
      <ion-buttons slot="end">
        <ion-icon
          name="ellipsis-vertical"
          class="wm-waypointdetail-menuopen"
          (click)="menu()"
        ></ion-icon>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content id="main">
    <old-webmapp-map
      class="wm-waypointdetail-map"
      #map
      [static]="true"
      [position]="waypoint.displayPosition"
    ></old-webmapp-map>

    <div class="wm-waypointdetail-date">{{waypoint.date | date : "dd MMMM YYYY"}}</div>

    <ion-list class="wm-waypointdetail-itemlist">
      <ion-item class="wm-waypointdetail-item" lines="none" *ngIf="waypoint?.title">
        <i class="icon-outline-list wm-waypointdetail-icon secondary" start></i>
        <div class="wm-waypointdetail-item-title">{{waypoint.title}}</div>
      </ion-item>

      <ion-item class="wm-waypointdetail-item" lines="none" *ngIf="waypoint?.waypointtype">
        <i class="icon-outline-activities wm-waypointdetail-icon primary" start></i>
        {{waypoint.waypointtype| wmtrans}}
      </ion-item>

      <ion-item class="wm-waypointdetail-item" lines="none" *ngIf="waypoint.nominatim as nominatim">
        <i class="webmapp-icon-pin-outline wm-waypointdetail-icon secondary" start></i>
        <div>
          <div class="wm-waypointdetail-item-city" *ngIf="nominatim.display_name as displayName">
            {{displayName}}
          </div>
          <div class="wm-waypointdetail-item-position" *ngIf="waypoint.position as position">
            lat: {{position.latitude}}, lon: {{ position.longitude }}
          </div>
        </div>
      </ion-item>

      <ion-item
        class="wm-waypointdetail-item"
        lines="none"
        *ngIf="waypoint.photos != null && waypoint.photos.length > 0"
      >
        <i class="webmapp-icon-camera wm-trackdetail-icon secondary" start></i>
        {{'pages.trackdetail.photos'|wmtrans}}
      </ion-item>
      <ng-container *ngIf="waypoint!= null &&waypoint.photos != null && waypoint.photos.length >0">
        <ion-slides
          pager="false"
          [options]="sliderOptions"
          class="wm-waypointdetail-photoslider"
          #slider
        >
          <ion-slide *ngFor="let photo of waypoint.photos;let idx = index">
            <div class="wm-waypointdetail-photocontainer">
              <ion-img [src]="getPhoto(photo)" class="wm-waypointdetail-photo"></ion-img>
            </div>
          </ion-slide>
        </ion-slides>
      </ng-container>
      <ion-item class="wm-waypointdetail-item" lines="none" *ngIf="waypoint?.description">
        <i class="webmapp-icon-document wm-waypointdetail-icon tertiary" start></i>
        {{waypoint.description}}
      </ion-item>
    </ion-list>
  </ion-content>
</ng-container>
