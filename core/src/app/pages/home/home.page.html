<ion-content class="webmapp-home-content">
  <div class="wm-home-header-container">
    <ion-label class="wm-home-hader-label">{{'pages.home.welcome' | translate}}</ion-label>
    <webmapp-search-bar
      class="webmapp-home-searchbar"
      *ngIf="showSearch"
      [initSearch]="title"
      (words)="isTyping$.next($event)"
    >
    </webmapp-search-bar>
  </div>
  <ng-container *ngIf="(isTyping$|async)||(layerCards$|async)!=null; else layers">
    <wm-search-box *ngFor="let card of cards$|async" [data]="card" (clickEVT)="searchCard(card.id)">
    </wm-search-box
  ></ng-container>

  <ng-template #layers>
    <ng-container *ngFor="let home of confHOME$|async">
      <h3 *ngIf="home.view === 'title'" class="webmapp-home-title">{{home.title}}</h3>
      <ng-container *ngIf="home.view === 'compact-horizontal'">
        <webmapp-layer-box
          *ngFor="let term of home.terms"
          [data]="term"
          (clickEVT)="setLayer(term)"
        >
        </webmapp-layer-box>
      </ng-container>
    </ng-container>
  </ng-template>

  <webmapp-card-slider
    [title]="'pages.home.mostViewedTracks' | translate"
    [data]="mostViewedRoutes"
  ></webmapp-card-slider>
  <webmapp-card-slider
    [title]="'pages.home.closerTracks' | translate"
    [nodata]="'pages.home.nocloserTracks' | translate"
    [data]="nearRoutes"
    [showDistance]="true"
  ></webmapp-card-slider>
</ion-content>
