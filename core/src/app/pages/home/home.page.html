<ion-content class="webmapp-home-content">
  <div class="wm-home-header-container">
    <ion-label class="wm-home-hader-label">{{'pages.home.welcome' | translate}}</ion-label>
    <webmapp-search-bar
      class="webmapp-home-searchbar"
      *ngIf="showSearch && online$|async"
      [initSearch]="title"
      (words)="isTyping$.next($event)"
    >
    </webmapp-search-bar>
  </div>

  <ng-container *ngIf="(online$|async) === false">
    <downloaded-tracks-box></downloaded-tracks-box>
  </ng-container>
  <ng-container *ngIf="online$|async">
    <ng-container *ngIf="(isTyping$|async)||(layerCards$|async)!=null; else myhome">
      <wm-search-box
        *ngFor="let card of cards$|async"
        [data]="card"
        (clickEVT)="searchCard(card.id)"
      >
      </wm-search-box
    ></ng-container>

    <ng-template #myhome>
      <ng-container *ngFor="let home of confHOME$|async">
        <h3 *ngIf="home.box_type === 'title'" class="webmapp-home-title">{{home.title}}</h3>
        <webmapp-layer-box
          *ngIf="home.box_type === 'layer'"
          [data]="home.layer"
          (clickEVT)="setLayer(home.layer)"
        >
        </webmapp-layer-box>
        <ng-container *ngIf="home.box_type == 'base'">
          <webmapp-slider-box [data]="home" (clickEVT)="searchCard($event)"></webmapp-slider-box>
        </ng-container>
        <ng-container *ngIf="home.box_type ==  'external_url'">
          <webmapp-external-url-box [data]="home"></webmapp-external-url-box>
        </ng-container>
      </ng-container>
    </ng-template>
  </ng-container>
  <ng-container *ngIf="false">
    <webmapp-card-slider
      [title]="'pages.home.mostViewedTracks' | translate"
      [data]="mostViewedRoutes"
    ></webmapp-card-slider>
    <webmapp-card-slider
      [title]="'pages.home.closerTracks' | translate"
      [nodata]="'pages.home.nocloserTracks' | translate"
      [data]="nearRoutes"
      [showDistance]="true"
    ></webmapp-card-slider>
  </ng-container>
</ion-content>
